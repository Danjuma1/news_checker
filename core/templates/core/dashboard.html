{% extends 'core/dash_base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block sidebar %}
<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
    <div class="position-sticky pt-3 sidebar-sticky">
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="{% url 'core:dashboard' %}">
            <span data-feather="home" class="align-text-bottom"></span>
            Home
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'core:news_list' %}">
            <span data-feather="file-text" class="align-text-bottom"></span>
            All Checked News
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'core:true_news_list' %}">
            <span data-feather="#" class="align-text-bottom"></span>
            All True News
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'core:fake_news_list' %}">
            <span data-feather="#" class="align-text-bottom"></span>
            All Fake News
          </a>
        </li>
      </ul>

      <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted text-uppercase">
        <span>For you</span>
      </h6>
      <ul class="nav flex-column mb-2">
        <li class="nav-item">
          <a class="nav-link" href="{% url 'core:profile' user.username %}">
            <span data-feather="user" class="align-text-bottom"></span>
            Profile
          </a>
        </li>
      </ul>
    </div>
</nav>

{% endblock sidebar %}

{% block content %}

<div class="container">

  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
      <h1 class="h2">Verify a News</h1>
  </div>

      <div class="container">
          <form method="POST" action="">
              {% csrf_token %}
              <div class="form-floating" style="margin-bottom: 20px;">
                  {% render_field form.headline type="text" class="form-control" id="floatingInputValue" placeholder="Headline" %}
                  <label for="floatingInputValue">Headline</label>
              </div> 
              <div class="form-floating" style="margin-bottom: 20px;">
                  {% render_field form.author type="text" class="form-control" id="floatingInputValue" placeholder="Headline" %}
                  <label for="floatingInputValue">Relaiable Author/ source</label>
              </div>
              <div class="form-floating">
                  {% render_field form.content class="form-control" placeholder="Paste the news content here..." id="floatingTextarea2" style="height: 200px" %}
                  <label for="floatingTextarea2">Content</label>
              </div>
              <br>
              <button type="submit" class="btn btn-primary btn-lg">Verify</button>
          </form>
      </div>
      <br><br>

      {% if output %}
      <div class="container">
        <div class="border-dark" id="result">
            {% if output == "True News" %}
            <h1 class="border-success" style="color: green;">{{ output }}</h1>
            {% else %}
            <h1 class="border-success" style="color: red;">{{ output }}</h1>
            {% endif %}
        </div>
      </div>
      {% endif %}

      <br><br>

      <h3>Headlines of Recently Verified News</h3>

        <div class="accordion accordion-flush" id="accordionFlushExample">
          {% for n in checked_news %}
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                {% if n.label == "True News" %}<span class="badge text-bg-success">{{ n.label }}</span>
                {% else %}<span class="badge text-bg-danger">{{ n.label }}</span>
                {% endif %}
                &nbsp;  &nbsp;
                {{ n.headline }}
              </button>
            </h2>
            <div id="flush-collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
              <div class="accordion-body">
                <span class="sm" style="font-size: 20px;">Checked on: {{n.date_added}} by {{ n.user | title }} | Author: {{ n.author }} </span>
                <br> {{ n.content | slice:":500" }}...
              </div>
            </div>
          </div>
          {% endfor %}
        </div>

   <br>
   <br>
</div>
{% endblock content %}